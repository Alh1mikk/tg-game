<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle RU</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –°—Ç–∏–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        
        .header {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--tg-theme-secondary-bg-color, #f0f0f0);
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--tg-theme-text-color, #000000);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            font-size: 14px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: var(--tg-theme-button-color, #2481cc);
        }
        
        .game-board {
            margin: 20px 0;
        }
        
        .row {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
            gap: 8px;
        }
        
        .cell {
            width: 50px;
            height: 50px;
            border: 2px solid var(--tg-theme-hint-color, #999999);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            text-transform: uppercase;
            border-radius: 8px;
        }
        
        .cell.correct {
            background: #6aaa64;
            color: white;
            border-color: #6aaa64;
        }
        
        .cell.present {
            background: #c9b458;
            color: white;
            border-color: #c9b458;
        }
        
        .cell.absent {
            background: #787c7e;
            color: white;
            border-color: #787c7e;
        }
        
        .keyboard {
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 500px;
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin: 0 auto 8px;
            gap: 6px;
            max-width: 500px;
        }
        
        .key {
            padding: 12px 6px;
            background: var(--tg-theme-secondary-bg-color, #d3d6da);
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            min-width: 28px;
            text-transform: uppercase;
            color: var(--tg-theme-text-color, #000000);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .key:active {
            background: var(--tg-theme-hint-color, #bbb);
            color: var(--tg-theme-text-color, #000000);
        }
        
        .key.wide {
            flex: 1;
            max-width: 80px;
            font-size: 12px;
        }
        
        .message {
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            min-height: 20px;
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
        }
        
        .controls {
            margin-top: 20px;
        }
        
        .btn {
            background: var(--tg-theme-button-color, #2481cc);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üî† –í–æ—Ä–¥–ª–∏</h1>
            <p>–£–≥–∞–¥–∞–π—Ç–µ —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤</p>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div>–ò–≥—Ä</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="gamesWon">0</div>
                    <div>–ü–æ–±–µ–¥</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="currentStreak">0</div>
                    <div>–°–µ—Ä–∏—è</div>
                </div>
            </div>
        </div>
        
        <div class="message" id="message"></div>
        
        <div class="game-board" id="board">
            <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JavaScript -->
        </div>
        
        <div class="keyboard" id="keyboard">
            <!-- –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JavaScript -->
        </div>
        
        <div class="controls">
            <button class="btn" onclick="newGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            <button class="btn" onclick="showHelp()">‚ùì –ü–æ–º–æ—â—å</button>
            <button class="btn" onclick="closeGame()">‚Üê –ù–∞–∑–∞–¥</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.BackButton.show();
        tg.BackButton.onClick(() => {
            tg.close();
        });

        // –°–ª–æ–≤–∞—Ä—å —Ä—É—Å—Å–∫–∏—Ö —Å–ª–æ–≤ (5 –±—É–∫–≤)
        const WORDS = [
            '–ê–ö–¶–ò–Ø', '–ë–ê–ù–ö–ê', '–í–ï–¢–ï–†', '–ì–û–†–ö–ê', '–î–£–ü–õ–û', 
            '–ï–ù–û–¢', '–ñ–ò–ó–ù–¨', '–ó–í–ï–ù–û', '–ò–ì–†–û–ö', '–ö–ù–ò–ì–ê',
            '–õ–ê–ú–ü–ê', '–ú–û–¢–û–†', '–ù–û–ñ–ö–ê', '–û–ö–ù–û', '–ü–ê–†–ö',
            '–†–ï–ß–ö–ê', '–°–ï–¢–ö–ê', '–¢–£–ú–ê–ù', '–£–õ–ò–¶–ê', '–§–û–ù–¢–ê–ù',
            '–•–õ–ï–ë', '–¶–í–ï–¢', '–ß–ê–®–ö–ê', '–®–£–¢–ö–ê', '–©–ò–¢–û–ö',
            '–≠–ö–†–ê–ù', '–Æ–ù–û–®–ê', '–Ø–ö–û–†–¨', '–ë–£–ö–ï–¢', '–í–ò–®–ù–Ø'
        ];

        let currentWord = '';
        let currentRow = 0;
        let currentCol = 0;
        let gameOver = false;
        let stats = {
            gamesPlayed: 0,
            gamesWon: 0,
            currentStreak: 0,
            maxStreak: 0
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function loadStats() {
            const saved = localStorage.getItem('wordle_stats');
            if (saved) {
                stats = JSON.parse(saved);
            }
            updateStatsDisplay();
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function saveStats() {
            localStorage.setItem('wordle_stats', JSON.stringify(stats));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStatsDisplay() {
            document.getElementById('gamesPlayed').textContent = stats.gamesPlayed;
            document.getElementById('gamesWon').textContent = stats.gamesWon;
            document.getElementById('currentStreak').textContent = stats.currentStreak;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        function initGame() {
            currentWord = WORDS[Math.floor(Math.random() * WORDS.length)];
            console.log('–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ:', currentWord); // –î–ª—è –æ—Ç–ª–∞–¥–∫–∏
            currentRow = 0;
            currentCol = 0;
            gameOver = false;
            
            createBoard();
            createKeyboard();
            showMessage('');
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            
            for (let row = 0; row < 6; row++) {
                const rowElement = document.createElement('div');
                rowElement.className = 'row';
                
                for (let col = 0; col < 5; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.id = `cell-${row}-${col}`;
                    rowElement.appendChild(cell);
                }
                
                board.appendChild(rowElement);
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            
            const keyboardLayout = [
                '–ô–¶–£–ö–ï–ù–ì–®–©–ó–•–™',
                '–§–´–í–ê–ü–†–û–õ–î–ñ–≠',
                '–Ø–ß–°–ú–ò–¢–¨–ë–Æ'
            ];
            
            keyboardLayout.forEach(row => {
                const rowElement = document.createElement('div');
                rowElement.className = 'keyboard-row';
                
                for (let char of row) {
                    const key = document.createElement('button');
                    key.className = 'key';
                    key.textContent = char;
                    key.onclick = () => handleKeyPress(char);
                    rowElement.appendChild(key);
                }
                
                keyboard.appendChild(rowElement);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
            const specialRow = document.createElement('div');
            specialRow.className = 'keyboard-row';
            
            const enterBtn = document.createElement('button');
            enterBtn.className = 'key wide';
            enterBtn.textContent = '–í–≤–æ–¥';
            enterBtn.onclick = checkGuess;
            specialRow.appendChild(enterBtn);
            
            const backspaceBtn = document.createElement('button');
            backspaceBtn.className = 'key wide';
            backspaceBtn.textContent = '‚å´';
            backspaceBtn.onclick = backspace;
            specialRow.appendChild(backspaceBtn);
            
            keyboard.appendChild(specialRow);
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à–∏
        function handleKeyPress(char) {
            if (gameOver || currentCol >= 5) return;
            
            const cell = document.getElementById(`cell-${currentRow}-${currentCol}`);
            cell.textContent = char;
            currentCol++;
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞
        function backspace() {
            if (gameOver || currentCol <= 0) return;
            
            currentCol--;
            const cell = document.getElementById(`cell-${currentRow}-${currentCol}`);
            cell.textContent = '';
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–≥–∞–¥–∫–∏
        function checkGuess() {
            if (currentCol !== 5) {
                showMessage('–í–≤–µ–¥–∏—Ç–µ 5 –±—É–∫–≤!', 'error');
                return;
            }
            
            // –ü–æ–ª—É—á–∞–µ–º –≤–≤–µ–¥–µ–Ω–Ω–æ–µ —Å–ª–æ–≤–æ
            let guess = '';
            for (let col = 0; col < 5; col++) {
                const cell = document.getElementById(`cell-${currentRow}-${col}`);
                guess += cell.textContent;
            }
            
            guess = guess.toUpperCase();
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å–ª–æ–≤–∞
            if (!WORDS.includes(guess)) {
                showMessage('–°–ª–æ–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ —Å–ª–æ–≤–∞—Ä–µ!', 'error');
                return;
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±—É–∫–≤—ã
            const result = checkLetters(guess);
            updateBoard(result);
            
            if (guess === currentWord) {
                gameWon();
            } else if (currentRow === 5) {
                gameLost();
            } else {
                currentRow++;
                currentCol = 0;
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—É–∫–≤
        function checkLetters(guess) {
            const result = new Array(5).fill('absent');
            const wordLetters = currentWord.split('');
            const guessLetters = guess.split('');
            
            // –°–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ—á–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏
            for (let i = 0; i < 5; i++) {
                if (guessLetters[i] === wordLetters[i]) {
                    result[i] = 'correct';
                    wordLetters[i] = null;
                }
            }
            
            // –ó–∞—Ç–µ–º –æ—Ç–º–µ—á–∞–µ–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –±—É–∫–≤—ã
            for (let i = 0; i < 5; i++) {
                if (result[i] === 'correct') continue;
                
                const index = wordLetters.indexOf(guessLetters[i]);
                if (index !== -1) {
                    result[i] = 'present';
                    wordLetters[index] = null;
                }
            }
            
            return result;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å–∫–∏
        function updateBoard(result) {
            for (let col = 0; col < 5; col++) {
                const cell = document.getElementById(`cell-${currentRow}-${col}`);
                cell.classList.add(result[col]);
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
                const key = Array.from(document.querySelectorAll('.key'))
                    .find(k => k.textContent === cell.textContent);
                if (key) {
                    // –ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å
                    if (!key.classList.contains('correct')) {
                        key.classList.remove('present', 'absent');
                        key.classList.add(result[col]);
                    }
                }
            }
        }

        // –ü–æ–±–µ–¥–∞
        function gameWon() {
            gameOver = true;
            stats.gamesPlayed++;
            stats.gamesWon++;
            stats.currentStreak++;
            stats.maxStreak = Math.max(stats.maxStreak, stats.currentStreak);
            
            saveStats();
            updateStatsDisplay();
            showMessage(`üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É–≥–∞–¥–∞–ª–∏ —Å–ª–æ–≤–æ "${currentWord}"!`, 'success');
        }

        // –ü–æ—Ä–∞–∂–µ–Ω–∏–µ
        function gameLost() {
            gameOver = true;
            stats.gamesPlayed++;
            stats.currentStreak = 0;
            
            saveStats();
            updateStatsDisplay();
            showMessage(`üòî –°–ª–æ–≤–æ –±—ã–ª–æ: ${currentWord}`, 'error');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function showMessage(text, type = '') {
            const message = document.getElementById('message');
            message.textContent = text;
            message.className = 'message';
            if (type) {
                message.classList.add(type);
            }
        }

        // –ù–æ–≤–∞—è –∏–≥—Ä–∞
        function newGame() {
            initGame();
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
        function showHelp() {
            alert(`üéØ **–ö–∞–∫ –∏–≥—Ä–∞—Ç—å –≤ –í–æ—Ä–¥–ª–∏:**

üéØ **–¶–µ–ª—å:** –£–≥–∞–¥–∞—Ç—å —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤ –∑–∞ 6 –ø–æ–ø—ã—Ç–æ–∫

üìù **–ü—Ä–∞–≤–∏–ª–∞:**
‚Ä¢ –í–≤–æ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –∏–∑ 5 –±—É–∫–≤ –∏ –Ω–∞–∂–∏–º–∞–π—Ç–µ "–í–≤–æ–¥"
‚Ä¢ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ —Ü–≤–µ—Ç –±—É–∫–≤ –ø–æ–∫–∞–∂–µ—Ç:
  üü© –ó–µ–ª–µ–Ω—ã–π - –±—É–∫–≤–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –º–µ—Å—Ç–µ
  üü® –ñ–µ–ª—Ç—ã–π - –±—É–∫–≤–∞ –µ—Å—Ç—å –≤ —Å–ª–æ–≤–µ, –Ω–æ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ
  ‚¨ú –°–µ—Ä—ã–π - –±—É–∫–≤—ã –Ω–µ—Ç –≤ —Å–ª–æ–≤–µ

üí° **–°–æ–≤–µ—Ç—ã:**
‚Ä¢ –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å–æ —Å–ª–æ–≤, —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö –º–Ω–æ–≥–æ –≥–ª–∞—Å–Ω—ã—Ö
‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–ø—ã—Ç–æ–∫
‚Ä¢ –ü–æ–º–Ω–∏—Ç–µ –æ —Ä—É—Å—Å–∫–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

üìö **–°–ª–æ–≤–∞—Ä—å:** –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä—É—Å—Å–∫–∏–µ —Å–ª–æ–≤–∞ –∏–∑ 5 –±—É–∫–≤

–£–¥–∞—á–∏! üçÄ`);
        }

        // –ó–∞–∫—Ä—ã—Ç—å –∏–≥—Ä—É
        function closeGame() {
            tg.close();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        loadStats();
        initGame();
    </script>
</body>
</html>